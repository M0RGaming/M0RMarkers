<GuiXml>
	<Controls>

		<!--
		Colour X
		Texture X
		Size
		Text

		-->

		<TopLevelControl name="M0RMarkerPlaceToplevel" clampedToScreen="true" mouseEnabled="true" movable="true" hidden="true">
			<Dimensions x="320" y="245" />
			<Anchor point="CENTER" relativeTo="GuiRoot" relativePoint="CENTER" offsetX="0" offsetY="0"/>
			<Controls>
				<Backdrop name="$(parent)BG" alpha="0.8" centerColor="000000" edgeColor="000000">
					<AnchorFill />
					<Edge edgeSize="3"/>
				</Backdrop>

				<Label name="$(parent)Texture" font="ZoFontGamepadBold20" horizontalAlignment="1" verticalAlignment="1" text="Texture">
					<Anchor point="TOPRIGHT" relativePoint="TOP" relativeTo="$(parent)" offsetX="-12.5" offsetY="10" />
					<Dimensions x="120" y="25" />
					<Controls>
						<Control name="$(parent)Picker" inherits="ZO_ComboBox" mouseEnabled="true" tier="HIGH" >
							<Dimensions x="135" y="25" />
							<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)" offsetY="0" />

							<OnInitialized>
								local comboBox = ZO_ComboBox:New(self)
								comboBox:SetSortsItems(false)

								local firstTime = true
								for i,v in ipairs(M0RMarkers.Settings.displayChoices) do
									local entry = comboBox:CreateItemEntry(v, function()
										M0RMarkers.print("Selected "..M0RMarkers.Settings.textureSearchup[v])
										M0RMarkers.Settings.quickSelections.texture = M0RMarkers.Settings.textureSearchup[v]
									end, true)
									comboBox:AddItem(entry)

									if firstTime then
										comboBox:ItemSelectedClickHelper(entry)
										firstTime = false
									end
								end
							</OnInitialized>
						</Control>
					</Controls>
				</Label>
				
				<Label name="$(parent)Colour" font="ZoFontGamepadBold20" horizontalAlignment="1" verticalAlignment="1" text="Colour">
					<Anchor point="TOPLEFT" relativePoint="TOP" relativeTo="$(parent)" offsetX="12.5" offsetY="10" />
					<Dimensions x="120" y="25" />
					<Controls>
						<Control name="$(parent)Picker" inherits="ZO_ComboBox" mouseEnabled="true" tier="HIGH" >
							<Dimensions x="135" y="25" />
							<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)" offsetY="0" />
							
							<OnInitialized>
								local comboBox = ZO_ComboBox:New(self)
								comboBox:SetSortsItems(false)

								local firstTime = true
								-- ZO_ComboBox_ObjectFromContainer(self)
								for i,v in ipairs(M0RMarkers.Settings.colourPresets) do
									local entry = comboBox:CreateItemEntry(v, function()
										M0RMarkers.print("Selected "..v)
										M0RMarkers.Settings.quickSelections.rgba = M0RMarkers.Settings.colourLookup[v]
									end, true)
									comboBox:AddItem(entry)

									if firstTime then
										comboBox:ItemSelectedClickHelper(entry)
										firstTime = false
									end
								end
							</OnInitialized>
						</Control>
					</Controls>
				</Label>

				<Label name="$(parent)Size" font="ZoFontGamepadBold20" horizontalAlignment="1" verticalAlignment="1" text="Size: 1m">
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)TexturePicker" offsetY="10" />
					<Dimensions x="120" y="25" />
				</Label>

				<Slider name="$(parent)SizeSlider" inherits="ZO_Slider" step="2">
					<Dimensions x="135" y="25" />
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)ColourPicker" offsetY="10" />
					<Limits min="2" max="50" />
					<OnInitialized>
						self:SetValue(10)
					</OnInitialized>
					<OnValueChanged>
						local value = self:GetValue()
						self:GetParent():GetNamedChild("Size"):SetText("Size: "..(value/10).."m")
						M0RMarkers.print("Size changed to: "..value/10)
						M0RMarkers.Settings.quickSelections.size = value/10
					</OnValueChanged>
				</Slider>

				<Label name="$(parent)Offset" font="ZoFontGamepadBold20" horizontalAlignment="1" verticalAlignment="1" text="Vertical Offset: 50%">
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)Size" offsetY="10" />
					<Dimensions x="150" y="25" />
				</Label>

				<Slider name="$(parent)OffsetSlider" inherits="ZO_Slider" step="5">
					<Dimensions x="135" y="25" />
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)SizeSlider" offsetY="10" />
					<Limits min="-100" max="100" />
					<OnInitialized>
						self:SetValue(50)
					</OnInitialized>
					<OnValueChanged>
						local value = self:GetValue()
						self:GetParent():GetNamedChild("Offset"):SetText("Vertical Offset: "..(value).."%")
						M0RMarkers.print("Vertical Offset changed to: "..value)
						M0RMarkers.Settings.quickSelections.offsetY = value
					</OnValueChanged>
				</Slider>


				<Label name="$(parent)Text" font="ZoFontGamepadBold20" horizontalAlignment="1" verticalAlignment="1" text="Text">
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)Offset" offsetY="10" />
					<Dimensions x="120" y="25" />
				</Label>

				<EditBox name="$(parent)TextEdit" inherits="ZO_DefaultEdit">
					<Dimensions x="135" y="25" />
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)OffsetSlider" offsetY="10" />
					<Controls>
						<Backdrop name="$(parent)BG" inherits="ZO_EditBackdrop">
							<AnchorFill />
						</Backdrop>
					</Controls>
					<OnTextChanged>
						local value = self:GetText()
						M0RMarkers.print("Text changed to: "..value)
						M0RMarkers.Settings.quickSelections.text = value
					</OnTextChanged>
				</EditBox>

				<Button name="$(parent)PlaceAtCursor" inherits="ZO_DefaultButton" text="|c98FB98Place at Cursor|r">
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)Text" offsetY="10" />
					<Dimensions x="125" y="25" />
					<OnClicked>
						M0RMarkers.placeQuickMenuIconAtCursor()
					</OnClicked>
				</Button>
				<Button name="$(parent)Place" inherits="ZO_DefaultButton" text="|c98FB98Place at Feet|r">
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)TextEdit" offsetY="10" />
					<Dimensions x="125" y="25" />
					<OnClicked>
						
						M0RMarkers.placeQuickMenuIcon()
					</OnClicked>
				</Button>

				<Button name="$(parent)RemoveAtCursor" inherits="ZO_DefaultButton" text="|cFFB6C1Remove (Cursor)|r">
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)PlaceAtCursor" offsetY="10" />
					<Dimensions x="125" y="25" />
					<OnClicked>
						M0RMarkers.removeIconAtCursor()
					</OnClicked>
				</Button>
				<Button name="$(parent)Remove" inherits="ZO_DefaultButton" text="|cFFB6C1Remove (Feet)|r">
					<Anchor point="TOP" relativePoint="BOTTOM" relativeTo="$(parent)Place" offsetY="10" />
					<Dimensions x="125" y="25" />
					<OnClicked>
						M0RMarkers.removeClosestIcon()
					</OnClicked>
				</Button>



				<Label name="$(parent)Name" font="ZoFontGamepadBookTabletTitle" horizontalAlignment="1" verticalAlignment="1" text="More Markers" level="2">
					<Anchor point="BOTTOM" relativePoint="TOP" relativeTo="$(parent)" offsetY="10" />
					<Dimensions x="325" y="45" /> <!-- was 300 -->
					<Controls>
						<Label name="$(parent)Outline" font="$(STONE_TABLET_FONT)|40|thick-outline" horizontalAlignment="1" verticalAlignment="1" text="More Markers" color="AA000000" level="1">
							<AnchorFill />
						</Label>
						<!--

							maybe make  M0RMarkerPlaceToplevelNameOutline:SetTransformScale(1.05)

							
						<Backdrop name="$(parent)BG" alpha="0.7" centerColor="111111" edgeColor="00000000">
							<AnchorFill />
							<Edge edgeSize="0"/>
						</Backdrop>
						-->
					</Controls>
				</Label>
			</Controls>
		</TopLevelControl>


		<TopLevelControl name="M0RMarkersCameraToplevel" layer="0" hidden="true">
			<OnInitialized>
				self:Create3DRenderSpace()
			</OnInitialized>
		</TopLevelControl>

	</Controls>
</GuiXml>